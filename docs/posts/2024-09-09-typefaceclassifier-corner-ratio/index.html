<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Vishal Bakshi">
<meta name="dcterms.date" content="2024-09-09">
<meta name="description" content="In this blog post I use the OpenCV library to calculate the ratio of the sum of non-zero corner pixels to the sum of non-zero original pixels of an image. The serif font has consistently larger ratios than the sans serif font.">

<title>vishal bakshi - Calculating the Ratio of Corners in an Image</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">vishal bakshi</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#load-image-and-binarize-it" id="toc-load-image-and-binarize-it" class="nav-link" data-scroll-target="#load-image-and-binarize-it">Load Image and Binarize It</a></li>
  <li><a href="#detect-corners" id="toc-detect-corners" class="nav-link" data-scroll-target="#detect-corners">Detect Corners</a></li>
  <li><a href="#calculating-the-ratio-of-corner-pixels-to-total-pixels" id="toc-calculating-the-ratio-of-corner-pixels-to-total-pixels" class="nav-link" data-scroll-target="#calculating-the-ratio-of-corner-pixels-to-total-pixels">Calculating the Ratio of Corner Pixels to Total Pixels</a></li>
  <li><a href="#calculating-contour-ratio-for-different-images" id="toc-calculating-contour-ratio-for-different-images" class="nav-link" data-scroll-target="#calculating-contour-ratio-for-different-images">Calculating Contour Ratio for Different Images</a></li>
  <li><a href="#final-thoughts" id="toc-final-thoughts" class="nav-link" data-scroll-target="#final-thoughts">Final Thoughts</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Calculating the Ratio of Corners in an Image</h1>
  <div class="quarto-categories">
    <div class="quarto-category">python</div>
    <div class="quarto-category">computer vision</div>
    <div class="quarto-category">TypefaceClassifier</div>
  </div>
  </div>

<div>
  <div class="description">
    In this blog post I use the OpenCV library to calculate the ratio of the sum of non-zero corner pixels to the sum of non-zero original pixels of an image. The serif font has consistently larger ratios than the sans serif font.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Vishal Bakshi </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<p>In this notebook I’ll walk through an algorithm suggested by Claude to distinguish one typeface (like <code>display</code>) from another (like <code>serif</code>) in which we calculate the ratio of the number of corners to number of pixels in a text image.</p>
<p>This algorithm is part of my exploration of non-ML baselines to classify text images into various typeface categories (e.g., “humanist sans,” “grotesque sans,” “script,” “display,” etc.). Once the non-ML baseline is established, I’ll train a neural network for this task. This is one of many notebooks in my <a href="https://vishalbakshi.github.io/blog/#category=TypefaceClassifier">TypefaceClassifier project series</a>.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> cv2</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> google.colab.patches <span class="im">import</span> cv2_imshow</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="load-image-and-binarize-it" class="level2">
<h2 class="anchored" data-anchor-id="load-image-and-binarize-it">Load Image and Binarize It</h2>
<p>As usual, we load the image and binarize it so it’s easier to distinguish between background (black pixels) and text (white pixels).</p>
<div class="cell" data-outputid="f0bb98fb-31e0-4a1b-9903-f33da49bb561" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="st">'serif-76px.png'</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>img <span class="op">=</span> cv2.imread(path, cv2.IMREAD_GRAYSCALE)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>_, binary <span class="op">=</span> cv2.threshold(img, <span class="dv">0</span>, <span class="dv">255</span>, cv2.THRESH_BINARY_INV <span class="op">+</span> cv2.THRESH_OTSU)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>binary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<style>
      .ndarray_repr .ndarray_raw_data {
        display: none;
      }
      .ndarray_repr.show_array .ndarray_raw_data {
        display: block;
      }
      .ndarray_repr.show_array .ndarray_image_preview {
        display: none;
      }
      </style>
      <div id="id-68fb1dac-33cd-45bc-854c-563ff35ad9ec" class="ndarray_repr"><pre>ndarray (512, 512) <button style="padding: 0 2px;">show data</button></pre><img src="data:image/png;base64,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" class="ndarray_image_preview"><pre class="ndarray_raw_data">array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       ...,
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], dtype=uint8)</pre></div><script>
      (() => {
      const titles = ['show data', 'hide data'];
      let index = 0
      document.querySelector('#id-68fb1dac-33cd-45bc-854c-563ff35ad9ec button').onclick = (e) => {
        document.querySelector('#id-68fb1dac-33cd-45bc-854c-563ff35ad9ec').classList.toggle('show_array');
        index = (++index) % 2;
        document.querySelector('#id-68fb1dac-33cd-45bc-854c-563ff35ad9ec button').textContent = titles[index];
        e.preventDefault();
        e.stopPropagation();
      }
      })();
    </script>
</div>
</div>
</section>
<section id="detect-corners" class="level2">
<h2 class="anchored" data-anchor-id="detect-corners">Detect Corners</h2>
<p>I’ll use the <a href="https://docs.opencv.org/4.x/dc/d0d/tutorial_py_features_harris.html">Harris Corner Detection algorithm</a> to identify the pixels at which there exists a corner in the image.</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>corners <span class="op">=</span> cv2.cornerHarris(binary, blockSize<span class="op">=</span><span class="dv">2</span>, ksize<span class="op">=</span><span class="dv">3</span>, k<span class="op">=</span><span class="fl">0.04</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Dilating the corners makes them brighter</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>corners <span class="op">=</span> cv2.dilate(corners, <span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-outputid="826ce03f-2b8f-441b-e5d4-88a48198dccb" data-execution_count="5">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>corners.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>(512, 512)</code></pre>
</div>
</div>
<div class="cell" data-outputid="4778893f-cd58-4904-aa84-ed4f40aaf7c6" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>corners[:<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]], dtype=float32)</code></pre>
</div>
</div>
<p><code>threshold</code>ing the pixels so that pixels with a <code>corners</code> value above 1% of the maximum are set to white (255).</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>_, corners <span class="op">=</span> cv2.threshold(corners, <span class="fl">0.01</span> <span class="op">*</span> corners.<span class="bu">max</span>(), <span class="dv">255</span>, <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The end result is a set of pixels that are the locations of corners in the image. Notice how the straight segments of the letters are (correctly) not identified as corners, while curves <em>are</em> identified as corners.</p>
<div class="cell" data-outputid="386d9500-8df2-47a4-cc68-2a7f56d808c3" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>cv2_imshow(corners)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/cell-9-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="index_files/figure-html/cell-9-output-1.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="calculating-the-ratio-of-corner-pixels-to-total-pixels" class="level2">
<h2 class="anchored" data-anchor-id="calculating-the-ratio-of-corner-pixels-to-total-pixels">Calculating the Ratio of Corner Pixels to Total Pixels</h2>
<p>The number of corners are the number of <code>corners</code> pixels that have a value greater than <code>0</code>.</p>
<div class="cell" data-outputid="f0076ee7-b7bb-4c92-d1c9-0826865ad8b3" data-execution_count="9">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(corners <span class="op">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>15127</code></pre>
</div>
</div>
<p>The ratio of number of corners to pixels in an image is given as the ratio of the number of <code>corners</code> pixels greater than <code>0</code> divided by the number of <code>binary</code> pixels greater than <code>0</code>. In this case, 67% of the pixels represent corners.</p>
<div class="cell" data-outputid="624fd82a-6f35-48c1-9e23-e60a7f2bede8" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(corners <span class="op">&gt;</span> <span class="dv">0</span>), np.<span class="bu">sum</span>(binary <span class="op">&gt;</span> <span class="dv">0</span>), np.<span class="bu">sum</span>(corners <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">/</span> np.<span class="bu">sum</span>(binary <span class="op">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>(15127, 22475, 0.6730589543937708)</code></pre>
</div>
</div>
<p>For a different image, notably <code>display</code> (sans serif) text of the same font-size (76px), this ratio is considerably smaller (39% &lt; 67%).</p>
<div class="cell" data-outputid="03116138-7926-4d9f-ef7f-9c15d729a23b" data-execution_count="11">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="st">'display-76px.png'</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>img <span class="op">=</span> cv2.imread(path, cv2.IMREAD_GRAYSCALE)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>_, binary <span class="op">=</span> cv2.threshold(img, <span class="dv">0</span>, <span class="dv">255</span>, cv2.THRESH_BINARY_INV <span class="op">+</span> cv2.THRESH_OTSU)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>binary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<style>
      .ndarray_repr .ndarray_raw_data {
        display: none;
      }
      .ndarray_repr.show_array .ndarray_raw_data {
        display: block;
      }
      .ndarray_repr.show_array .ndarray_image_preview {
        display: none;
      }
      </style>
      <div id="id-41f26308-c79b-4346-a646-a9e5eda237b7" class="ndarray_repr"><pre>ndarray (512, 512) <button style="padding: 0 2px;">show data</button></pre><img src="data:image/png;base64,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" class="ndarray_image_preview"><pre class="ndarray_raw_data">array([[0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       ...,
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0],
       [0, 0, 0, ..., 0, 0, 0]], dtype=uint8)</pre></div><script>
      (() => {
      const titles = ['show data', 'hide data'];
      let index = 0
      document.querySelector('#id-41f26308-c79b-4346-a646-a9e5eda237b7 button').onclick = (e) => {
        document.querySelector('#id-41f26308-c79b-4346-a646-a9e5eda237b7').classList.toggle('show_array');
        index = (++index) % 2;
        document.querySelector('#id-41f26308-c79b-4346-a646-a9e5eda237b7 button').textContent = titles[index];
        e.preventDefault();
        e.stopPropagation();
      }
      })();
    </script>
</div>
</div>
<div class="cell" data-outputid="69f391ce-f5dd-4bb2-f18a-88bba5c8bf81" data-execution_count="12">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>corners <span class="op">=</span> cv2.cornerHarris(binary, blockSize<span class="op">=</span><span class="dv">2</span>, ksize<span class="op">=</span><span class="dv">3</span>, k<span class="op">=</span><span class="fl">0.04</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>corners <span class="op">=</span> cv2.dilate(corners, <span class="va">None</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>_, corners <span class="op">=</span> cv2.threshold(corners, <span class="fl">0.01</span> <span class="op">*</span> corners.<span class="bu">max</span>(), <span class="dv">255</span>, <span class="dv">0</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">sum</span>(corners <span class="op">&gt;</span> <span class="dv">0</span>), np.<span class="bu">sum</span>(binary <span class="op">&gt;</span> <span class="dv">0</span>), np.<span class="bu">sum</span>(corners <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">/</span> np.<span class="bu">sum</span>(binary <span class="op">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>(13650, 34992, 0.3900891632373114)</code></pre>
</div>
</div>
<p>Visually, you can see how much fewer corners are detected in this image than in the image with serif text—this makes sense! Serifs are intricate flourishes added to the ends of letters and contain more changes in stroke (corners).</p>
<div class="cell" data-outputid="998deb5c-d6c2-427f-b540-666790c87652" data-execution_count="13">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>cv2_imshow(corners)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="index_files/figure-html/cell-14-output-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="index_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="calculating-contour-ratio-for-different-images" class="level2">
<h2 class="anchored" data-anchor-id="calculating-contour-ratio-for-different-images">Calculating Contour Ratio for Different Images</h2>
<p>I’ll now wrap the code above into a function and apply it to a wide variety of images (of two typefaces, <code>display</code> and <code>serif</code> and 8 different font sizes). I expect, on average, the <code>serif</code> images to have a higher corner ratio than <code>display</code> images, since serifs introduce more corners.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> corner_ratio(path):</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    img <span class="op">=</span> cv2.imread(path, cv2.IMREAD_GRAYSCALE)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    _, binary <span class="op">=</span> cv2.threshold(img, <span class="dv">0</span>, <span class="dv">255</span>, cv2.THRESH_BINARY_INV <span class="op">+</span> cv2.THRESH_OTSU)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    corners <span class="op">=</span> cv2.cornerHarris(binary, blockSize<span class="op">=</span><span class="dv">2</span>, ksize<span class="op">=</span><span class="dv">3</span>, k<span class="op">=</span><span class="fl">0.04</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    corners <span class="op">=</span> cv2.dilate(corners, <span class="va">None</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    _, corners <span class="op">=</span> cv2.threshold(corners, <span class="fl">0.01</span> <span class="op">*</span> corners.<span class="bu">max</span>(), <span class="dv">255</span>, <span class="dv">0</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    corners <span class="op">=</span> np.uint8(corners)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    num_corners <span class="op">=</span> np.<span class="bu">sum</span>(corners <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    total_pixels <span class="op">=</span> np.<span class="bu">sum</span>(binary <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    corner_ratio <span class="op">=</span> num_corners <span class="op">/</span> total_pixels <span class="cf">if</span> total_pixels <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> corner_ratio</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>On average, images with <code>serif</code> fonts have more corners present.</p>
<div class="cell" data-outputid="11c87e58-7498-4a66-9e04-ce5263774026" data-execution_count="15">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>szs <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">18</span>, <span class="dv">24</span>, <span class="dv">36</span>, <span class="dv">76</span>, <span class="dv">240</span>, <span class="dv">330</span>, <span class="dv">420</span>]</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>ts <span class="op">=</span> [<span class="st">'display'</span>, <span class="st">'serif'</span>]</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> []</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> ts:</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> sz <span class="kw">in</span> szs:</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>        image_path <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>t<span class="sc">}</span><span class="ss">-</span><span class="sc">{</span>sz<span class="sc">}</span><span class="ss">px.png"</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        sr <span class="op">=</span> corner_ratio(image_path)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        res.append([t, sz, sr])</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> pd.DataFrame(res, columns<span class="op">=</span>[<span class="st">'typeface'</span>, <span class="st">'font-size'</span>, <span class="st">'corner-ratio'</span>])</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>res.groupby(<span class="st">'typeface'</span>)[<span class="st">'corner-ratio'</span>].agg([<span class="st">'mean'</span>, <span class="st">'median'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">


  <div id="df-d204e70b-5c93-4e9a-8a7a-b09d169d0c66" class="colab-df-container">
    <div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>mean</th>
      <th>median</th>
    </tr>
    <tr>
      <th>typeface</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>display</th>
      <td>0.989564</td>
      <td>0.734144</td>
    </tr>
    <tr>
      <th>serif</th>
      <td>1.287083</td>
      <td>1.134465</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-d204e70b-5c93-4e9a-8a7a-b09d169d0c66')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-d204e70b-5c93-4e9a-8a7a-b09d169d0c66 button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-d204e70b-5c93-4e9a-8a7a-b09d169d0c66');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-3b96fbde-4bc8-4619-8d30-0690b858dc1d">
  <button class="colab-df-quickchart" onclick="quickchart('df-3b96fbde-4bc8-4619-8d30-0690b858dc1d')" title="Suggest charts" style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-3b96fbde-4bc8-4619-8d30-0690b858dc1d button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

    </div>
  </div>
</div>
</div>
<p>This trend holds up for each font size:</p>
<div class="cell" data-outputid="ae959be7-4391-44e0-bc79-706c7f59df98" data-execution_count="16">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>res.sort_values(by<span class="op">=</span><span class="st">'font-size'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">


  <div id="df-0df0ed54-3ca8-43f4-8039-0a5f41c4a3ca" class="colab-df-container">
    <div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>typeface</th>
      <th>font-size</th>
      <th>corner-ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>display</td>
      <td>8</td>
      <td>2.827288</td>
    </tr>
    <tr>
      <th>8</th>
      <td>serif</td>
      <td>8</td>
      <td>2.874287</td>
    </tr>
    <tr>
      <th>1</th>
      <td>display</td>
      <td>18</td>
      <td>1.784839</td>
    </tr>
    <tr>
      <th>9</th>
      <td>serif</td>
      <td>18</td>
      <td>2.573949</td>
    </tr>
    <tr>
      <th>2</th>
      <td>display</td>
      <td>24</td>
      <td>1.609162</td>
    </tr>
    <tr>
      <th>10</th>
      <td>serif</td>
      <td>24</td>
      <td>2.192324</td>
    </tr>
    <tr>
      <th>3</th>
      <td>display</td>
      <td>36</td>
      <td>1.078198</td>
    </tr>
    <tr>
      <th>11</th>
      <td>serif</td>
      <td>36</td>
      <td>1.595871</td>
    </tr>
    <tr>
      <th>4</th>
      <td>display</td>
      <td>76</td>
      <td>0.390089</td>
    </tr>
    <tr>
      <th>12</th>
      <td>serif</td>
      <td>76</td>
      <td>0.673059</td>
    </tr>
    <tr>
      <th>5</th>
      <td>display</td>
      <td>240</td>
      <td>0.113082</td>
    </tr>
    <tr>
      <th>13</th>
      <td>serif</td>
      <td>240</td>
      <td>0.173800</td>
    </tr>
    <tr>
      <th>6</th>
      <td>display</td>
      <td>330</td>
      <td>0.061339</td>
    </tr>
    <tr>
      <th>14</th>
      <td>serif</td>
      <td>330</td>
      <td>0.123992</td>
    </tr>
    <tr>
      <th>7</th>
      <td>display</td>
      <td>420</td>
      <td>0.052513</td>
    </tr>
    <tr>
      <th>15</th>
      <td>serif</td>
      <td>420</td>
      <td>0.089383</td>
    </tr>
  </tbody>
</table>
</div>
    <div class="colab-df-buttons">

  <div class="colab-df-container">
    <button class="colab-df-convert" onclick="convertToInteractive('df-0df0ed54-3ca8-43f4-8039-0a5f41c4a3ca')" title="Convert this dataframe to an interactive table." style="display:none;">

  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 -960 960 960">
    <path d="M120-120v-720h720v720H120Zm60-500h600v-160H180v160Zm220 220h160v-160H400v160Zm0 220h160v-160H400v160ZM180-400h160v-160H180v160Zm440 0h160v-160H620v160ZM180-180h160v-160H180v160Zm440 0h160v-160H620v160Z"></path>
  </svg>
    </button>

  <style>
    .colab-df-container {
      display:flex;
      gap: 12px;
    }

    .colab-df-convert {
      background-color: #E8F0FE;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: none;
      fill: #1967D2;
      height: 32px;
      padding: 0 0 0 0;
      width: 32px;
    }

    .colab-df-convert:hover {
      background-color: #E2EBFA;
      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);
      fill: #174EA6;
    }

    .colab-df-buttons div {
      margin-bottom: 4px;
    }

    [theme=dark] .colab-df-convert {
      background-color: #3B4455;
      fill: #D2E3FC;
    }

    [theme=dark] .colab-df-convert:hover {
      background-color: #434B5C;
      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));
      fill: #FFFFFF;
    }
  </style>

    <script>
      const buttonEl =
        document.querySelector('#df-0df0ed54-3ca8-43f4-8039-0a5f41c4a3ca button.colab-df-convert');
      buttonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';

      async function convertToInteractive(key) {
        const element = document.querySelector('#df-0df0ed54-3ca8-43f4-8039-0a5f41c4a3ca');
        const dataTable =
          await google.colab.kernel.invokeFunction('convertToInteractive',
                                                    [key], {});
        if (!dataTable) return;

        const docLinkHtml = 'Like what you see? Visit the ' +
          '<a target="_blank" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'
          + ' to learn more about interactive tables.';
        element.innerHTML = '';
        dataTable['output_type'] = 'display_data';
        await google.colab.output.renderOutput(dataTable, element);
        const docLink = document.createElement('div');
        docLink.innerHTML = docLinkHtml;
        element.appendChild(docLink);
      }
    </script>
  </div>


<div id="df-b3f69d2e-a968-4724-bf1e-5232c5ce4c07">
  <button class="colab-df-quickchart" onclick="quickchart('df-b3f69d2e-a968-4724-bf1e-5232c5ce4c07')" title="Suggest charts" style="display:none;">

<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewbox="0 0 24 24" width="24px">
    <g>
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>
    </g>
</svg>
  </button>

<style>
  .colab-df-quickchart {
      --bg-color: #E8F0FE;
      --fill-color: #1967D2;
      --hover-bg-color: #E2EBFA;
      --hover-fill-color: #174EA6;
      --disabled-fill-color: #AAA;
      --disabled-bg-color: #DDD;
  }

  [theme=dark] .colab-df-quickchart {
      --bg-color: #3B4455;
      --fill-color: #D2E3FC;
      --hover-bg-color: #434B5C;
      --hover-fill-color: #FFFFFF;
      --disabled-bg-color: #3B4455;
      --disabled-fill-color: #666;
  }

  .colab-df-quickchart {
    background-color: var(--bg-color);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    fill: var(--fill-color);
    height: 32px;
    padding: 0;
    width: 32px;
  }

  .colab-df-quickchart:hover {
    background-color: var(--hover-bg-color);
    box-shadow: 0 1px 2px rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
    fill: var(--button-hover-fill-color);
  }

  .colab-df-quickchart-complete:disabled,
  .colab-df-quickchart-complete:disabled:hover {
    background-color: var(--disabled-bg-color);
    fill: var(--disabled-fill-color);
    box-shadow: none;
  }

  .colab-df-spinner {
    border: 2px solid var(--fill-color);
    border-color: transparent;
    border-bottom-color: var(--fill-color);
    animation:
      spin 1s steps(1) infinite;
  }

  @keyframes spin {
    0% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
      border-left-color: var(--fill-color);
    }
    20% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    30% {
      border-color: transparent;
      border-left-color: var(--fill-color);
      border-top-color: var(--fill-color);
      border-right-color: var(--fill-color);
    }
    40% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-top-color: var(--fill-color);
    }
    60% {
      border-color: transparent;
      border-right-color: var(--fill-color);
    }
    80% {
      border-color: transparent;
      border-right-color: var(--fill-color);
      border-bottom-color: var(--fill-color);
    }
    90% {
      border-color: transparent;
      border-bottom-color: var(--fill-color);
    }
  }
</style>

  <script>
    async function quickchart(key) {
      const quickchartButtonEl =
        document.querySelector('#' + key + ' button');
      quickchartButtonEl.disabled = true;  // To prevent multiple clicks.
      quickchartButtonEl.classList.add('colab-df-spinner');
      try {
        const charts = await google.colab.kernel.invokeFunction(
            'suggestCharts', [key], {});
      } catch (error) {
        console.error('Error during call to suggestCharts:', error);
      }
      quickchartButtonEl.classList.remove('colab-df-spinner');
      quickchartButtonEl.classList.add('colab-df-quickchart-complete');
    }
    (() => {
      let quickchartButtonEl =
        document.querySelector('#df-b3f69d2e-a968-4724-bf1e-5232c5ce4c07 button');
      quickchartButtonEl.style.display =
        google.colab.kernel.accessAllowed ? 'block' : 'none';
    })();
  </script>
</div>

    </div>
  </div>
</div>
</div>
</section>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h2>
<p>Similar to the <a href="https://vishalbakshi.github.io/blog/posts/2024-09-06-typefaceclassifier-contour-ratio/">contour ratio algorithm</a> there is a clear and consistent difference in value between serif and sans serif fonts for this corner ratio algorithm, making this a good candidate for distinguishing between typefaces.</p>
<p>This is also another relatively simple algorithm, and each step can be easily visualized.</p>
<p>I hope you enjoyed this blog post! Follow me on Twitter <a href="https://twitter.com/vishal_learner"><span class="citation" data-cites="vishal_learner">@vishal_learner</span></a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","loop":true,"descPosition":"bottom","openEffect":"zoom"});</script>



</body></html>